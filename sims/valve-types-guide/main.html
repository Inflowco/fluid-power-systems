<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Valve Types Interactive Guide</title>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, sans-serif;
    background: #f5f5f5;
    min-height: 100vh;
    padding: 20px;
  }

  h1 {
    text-align: center;
    color: #333;
    margin-bottom: 8px;
    font-size: 1.6rem;
  }

  .legend {
    display: flex;
    justify-content: center;
    gap: 20px;
    flex-wrap: wrap;
    margin-bottom: 16px;
    font-size: 0.85rem;
    color: #555;
  }
  .legend-item {
    display: flex;
    align-items: center;
    gap: 6px;
  }
  .legend-swatch {
    width: 16px;
    height: 16px;
    border-radius: 3px;
    border: 2px solid;
  }

  .grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 16px;
    max-width: 900px;
    margin: 0 auto;
  }

  /* Center last row with fewer items */
  .grid .card:nth-child(7) {
    grid-column: 2 / 3;
  }

  @media (max-width: 780px) {
    .grid {
      grid-template-columns: repeat(2, 1fr);
    }
    .grid .card:nth-child(7) {
      grid-column: 1 / -1;
      max-width: 280px;
      justify-self: center;
    }
  }

  @media (max-width: 520px) {
    .grid {
      grid-template-columns: 1fr;
    }
    .grid .card:nth-child(7) {
      grid-column: auto;
      max-width: none;
    }
  }

  .card {
    background: #fff;
    border-radius: 10px;
    border: 3px solid #ccc;
    padding: 12px;
    cursor: pointer;
    position: relative;
    transition: transform 0.2s, box-shadow 0.2s;
    text-align: center;
  }
  .card:hover {
    transform: translateY(-4px);
    box-shadow: 0 6px 20px rgba(0,0,0,0.15);
  }

  .card[data-category="on-off"] { border-color: #2196F3; }
  .card[data-category="throttling"] { border-color: #4CAF50; }
  .card[data-category="safety"] { border-color: #FF9800; }
  .card[data-category="directional"] { border-color: #9C27B0; }

  .card svg {
    display: block;
    margin: 0 auto;
    width: 100%;
    max-width: 220px;
    height: 200px;
  }

  .card-name {
    font-weight: 600;
    font-size: 0.95rem;
    color: #333;
    margin-top: 8px;
  }

  .card-state {
    font-size: 0.78rem;
    color: #888;
    margin-top: 2px;
    font-style: italic;
  }

  /* Tooltip */
  .tooltip {
    display: none;
    position: absolute;
    bottom: calc(100% + 10px);
    left: 50%;
    transform: translateX(-50%);
    background: #333;
    color: #fff;
    padding: 10px 14px;
    border-radius: 8px;
    font-size: 0.82rem;
    line-height: 1.5;
    width: 230px;
    text-align: left;
    z-index: 100;
    pointer-events: none;
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
  }
  .tooltip::after {
    content: '';
    position: absolute;
    top: 100%;
    left: 50%;
    transform: translateX(-50%);
    border: 8px solid transparent;
    border-top-color: #333;
  }
  .card:hover .tooltip {
    display: block;
  }
  .tooltip strong {
    display: block;
    font-size: 0.92rem;
    margin-bottom: 4px;
  }
  .tooltip .tt-func {
    color: #adf;
  }
  .tooltip .tt-app {
    color: #fda;
  }

  /* SVG animation helpers */
  .valve-part {
    transition: transform 0.5s ease-in-out, opacity 0.5s ease-in-out;
  }
  .flow-arrow {
    transition: opacity 0.5s ease-in-out;
  }
</style>
</head>
<body>

<h1>Valve Types Interactive Guide</h1>

<div class="legend">
  <div class="legend-item">
    <div class="legend-swatch" style="border-color: #2196F3; background: rgba(33,150,243,0.15);"></div>
    On/Off
  </div>
  <div class="legend-item">
    <div class="legend-swatch" style="border-color: #4CAF50; background: rgba(76,175,80,0.15);"></div>
    Throttling
  </div>
  <div class="legend-item">
    <div class="legend-swatch" style="border-color: #FF9800; background: rgba(255,152,0,0.15);"></div>
    Safety
  </div>
  <div class="legend-item">
    <div class="legend-swatch" style="border-color: #9C27B0; background: rgba(156,39,176,0.15);"></div>
    Directional / Backflow
  </div>
</div>

<div class="grid" id="grid"></div>

<script>
(function() {
  // Valve data
  const valves = [
    {
      id: 'gate',
      name: 'Gate Valve',
      category: 'on-off',
      func: 'On/Off isolation',
      app: 'Main water supply shutoff',
      isOpen: false
    },
    {
      id: 'ball',
      name: 'Ball Valve',
      category: 'on-off',
      func: 'On/Off quarter-turn',
      app: 'Gas line shutoff valves',
      isOpen: false
    },
    {
      id: 'globe',
      name: 'Globe Valve',
      category: 'throttling',
      func: 'Flow throttling',
      app: 'Cooling water flow regulation',
      isOpen: false
    },
    {
      id: 'butterfly',
      name: 'Butterfly Valve',
      category: 'throttling',
      func: 'Flow modulation',
      app: 'HVAC duct damper control',
      isOpen: false
    },
    {
      id: 'check',
      name: 'Check Valve',
      category: 'directional',
      func: 'Backflow prevention',
      app: 'Pump discharge lines',
      isOpen: false
    },
    {
      id: 'solenoid',
      name: 'Solenoid Valve',
      category: 'directional',
      func: 'Electrically actuated directional control',
      app: 'Pneumatic cylinder control circuits',
      isOpen: false
    },
    {
      id: 'relief',
      name: 'Pressure Relief Valve',
      category: 'safety',
      func: 'Overpressure protection',
      app: 'Hydraulic pump safety relief',
      isOpen: false
    }
  ];

  // SVG drawing functions for each valve
  // Each returns SVG inner content for closed (isOpen=false) and open (isOpen=true)
  function drawGateValve(isOpen) {
    const gateY = isOpen ? 30 : 85;
    const flowOpacity = isOpen ? 1 : 0;
    const blockOpacity = isOpen ? 0 : 1;
    return `
      <!-- Valve body -->
      <rect x="30" y="70" width="160" height="80" rx="6" fill="#888" stroke="#666" stroke-width="2"/>
      <!-- Flow channel -->
      <rect x="30" y="95" width="160" height="30" fill="#d0d8e0"/>
      <!-- Inlet pipe -->
      <rect x="0" y="95" width="35" height="30" fill="#999" stroke="#666" stroke-width="1.5"/>
      <!-- Outlet pipe -->
      <rect x="185" y="95" width="35" height="30" fill="#999" stroke="#666" stroke-width="1.5"/>
      <!-- Gate (wedge) -->
      <polygon points="90,${gateY} 130,${gateY} 125,${gateY+50} 95,${gateY+50}"
        fill="#C0C0C0" stroke="#888" stroke-width="2" class="valve-part"/>
      <!-- Stem -->
      <rect x="105" y="20" width="10" height="${gateY - 20}" fill="#aaa" stroke="#888" stroke-width="1" class="valve-part"/>
      <!-- Handwheel -->
      <ellipse cx="110" cy="18" rx="28" ry="8" fill="none" stroke="#666" stroke-width="3"/>
      <circle cx="110" cy="18" r="5" fill="#777"/>
      <!-- Bonnet -->
      <rect x="95" y="60" width="30" height="15" rx="3" fill="#777" stroke="#666" stroke-width="1.5"/>
      <!-- Flow arrows (when open) -->
      <g class="flow-arrow" opacity="${flowOpacity}">
        <polygon points="55,106 70,100 70,112" fill="#2196F3"/>
        <polygon points="150,106 165,100 165,112" fill="#2196F3"/>
        <line x1="15" y1="106" x2="55" y2="106" stroke="#2196F3" stroke-width="2"/>
        <line x1="165" y1="106" x2="205" y2="106" stroke="#2196F3" stroke-width="2"/>
      </g>
      <!-- Blocked indicator -->
      <g opacity="${blockOpacity}">
        <line x1="98" y1="98" x2="122" y2="122" stroke="#E53935" stroke-width="3" stroke-linecap="round"/>
        <line x1="122" y1="98" x2="98" y2="122" stroke="#E53935" stroke-width="3" stroke-linecap="round"/>
      </g>
    `;
  }

  function drawBallValve(isOpen) {
    const rotation = isOpen ? 0 : 90;
    const flowOpacity = isOpen ? 1 : 0;
    const blockOpacity = isOpen ? 0 : 1;
    return `
      <!-- Valve body -->
      <rect x="30" y="70" width="160" height="80" rx="8" fill="#888" stroke="#666" stroke-width="2"/>
      <!-- Inlet pipe -->
      <rect x="0" y="95" width="35" height="30" fill="#999" stroke="#666" stroke-width="1.5"/>
      <!-- Outlet pipe -->
      <rect x="185" y="95" width="35" height="30" fill="#999" stroke="#666" stroke-width="1.5"/>
      <!-- Ball chamber -->
      <circle cx="110" cy="110" r="32" fill="#d0d8e0" stroke="#777" stroke-width="1"/>
      <!-- Ball -->
      <circle cx="110" cy="110" r="28" fill="#C0C0C0" stroke="#999" stroke-width="2"/>
      <!-- Bore through ball -->
      <rect x="${isOpen ? 82 : 102}" y="${isOpen ? 104 : 82}" width="${isOpen ? 56 : 16}" height="${isOpen ? 12 : 56}" rx="4" fill="#d0d8e0" class="valve-part"/>
      <!-- Handle base -->
      <rect x="103" y="70" width="14" height="16" fill="#777" stroke="#666" stroke-width="1"/>
      <!-- Quarter-turn handle -->
      <g transform="rotate(${isOpen ? -45 : 0}, 110, 65)" class="valve-part">
        <rect x="108" y="30" width="4" height="38" rx="2" fill="#E53935"/>
        <rect x="95" y="28" width="30" height="8" rx="4" fill="#E53935"/>
      </g>
      <!-- Flow arrows -->
      <g class="flow-arrow" opacity="${flowOpacity}">
        <polygon points="55,106 70,100 70,112" fill="#2196F3"/>
        <polygon points="150,106 165,100 165,112" fill="#2196F3"/>
        <line x1="15" y1="106" x2="55" y2="106" stroke="#2196F3" stroke-width="2"/>
        <line x1="165" y1="106" x2="205" y2="106" stroke="#2196F3" stroke-width="2"/>
      </g>
      <!-- Blocked indicator -->
      <g opacity="${blockOpacity}">
        <line x1="98" y1="98" x2="122" y2="122" stroke="#E53935" stroke-width="3" stroke-linecap="round"/>
        <line x1="122" y1="98" x2="98" y2="122" stroke="#E53935" stroke-width="3" stroke-linecap="round"/>
      </g>
    `;
  }

  function drawGlobeValve(isOpen) {
    const plugY = isOpen ? 72 : 95;
    const flowOpacity = isOpen ? 1 : 0;
    const blockOpacity = isOpen ? 0 : 1;
    return `
      <!-- Valve body - globe shape -->
      <ellipse cx="110" cy="110" rx="75" ry="45" fill="#888" stroke="#666" stroke-width="2"/>
      <!-- Internal S-path baffle -->
      <path d="M35,110 L80,110 L80,90 L140,90 L140,110 L185,110" fill="none" stroke="#d0d8e0" stroke-width="18" stroke-linecap="round" stroke-linejoin="round"/>
      <!-- Seat -->
      <rect x="95" y="92" width="30" height="6" rx="2" fill="#666"/>
      <!-- Plug / disc -->
      <ellipse cx="110" cy="${plugY}" rx="14" ry="6" fill="#C0C0C0" stroke="#999" stroke-width="1.5" class="valve-part"/>
      <!-- Stem -->
      <rect x="106" y="30" width="8" height="${plugY - 30}" fill="#aaa" stroke="#888" stroke-width="1" class="valve-part"/>
      <!-- Bonnet -->
      <rect x="92" y="60" width="36" height="12" rx="3" fill="#777" stroke="#666" stroke-width="1.5"/>
      <!-- Handwheel -->
      <ellipse cx="110" cy="26" rx="28" ry="8" fill="none" stroke="#666" stroke-width="3"/>
      <circle cx="110" cy="26" r="5" fill="#777"/>
      <!-- Inlet pipe -->
      <rect x="0" y="100" width="40" height="20" fill="#999" stroke="#666" stroke-width="1.5"/>
      <!-- Outlet pipe -->
      <rect x="180" y="100" width="40" height="20" fill="#999" stroke="#666" stroke-width="1.5"/>
      <!-- Flow arrows -->
      <g class="flow-arrow" opacity="${flowOpacity}">
        <polygon points="18,108 28,103 28,113" fill="#2196F3"/>
        <polygon points="192,108 202,103 202,113" fill="#2196F3"/>
      </g>
      <!-- Blocked indicator -->
      <g opacity="${blockOpacity}">
        <line x1="100" y1="83" x2="120" y2="103" stroke="#E53935" stroke-width="3" stroke-linecap="round"/>
        <line x1="120" y1="83" x2="100" y2="103" stroke="#E53935" stroke-width="3" stroke-linecap="round"/>
      </g>
    `;
  }

  function drawButterflyValve(isOpen) {
    const discAngle = isOpen ? 0 : 90;
    const flowOpacity = isOpen ? 1 : 0;
    const blockOpacity = isOpen ? 0 : 1;
    // For open: disc is parallel to flow (thin line). For closed: disc is perpendicular (blocks pipe).
    return `
      <!-- Pipe / body -->
      <rect x="20" y="75" width="180" height="60" rx="8" fill="#888" stroke="#666" stroke-width="2"/>
      <!-- Flow channel -->
      <rect x="20" y="85" width="180" height="40" fill="#d0d8e0"/>
      <!-- Inlet pipe -->
      <rect x="0" y="85" width="25" height="40" fill="#999" stroke="#666" stroke-width="1.5"/>
      <!-- Outlet pipe -->
      <rect x="195" y="85" width="25" height="40" fill="#999" stroke="#666" stroke-width="1.5"/>
      <!-- Shaft -->
      <line x1="110" y1="55" x2="110" y2="155" stroke="#999" stroke-width="4"/>
      <!-- Disc -->
      ${isOpen ?
        `<ellipse cx="110" cy="105" rx="3" ry="30" fill="#C0C0C0" stroke="#999" stroke-width="1.5" class="valve-part"/>` :
        `<ellipse cx="110" cy="105" rx="38" ry="18" fill="#C0C0C0" stroke="#999" stroke-width="1.5" class="valve-part"/>`
      }
      <!-- Lever operator -->
      <rect x="100" y="45" width="20" height="14" rx="4" fill="#777" stroke="#666" stroke-width="1"/>
      <g transform="rotate(${isOpen ? -90 : 0}, 110, 45)" class="valve-part">
        <rect x="108" y="15" width="4" height="32" rx="2" fill="#4CAF50"/>
        <circle cx="110" cy="14" r="5" fill="#388E3C"/>
      </g>
      <!-- Flow arrows -->
      <g class="flow-arrow" opacity="${flowOpacity}">
        <polygon points="50,103 65,97 65,109" fill="#2196F3"/>
        <polygon points="155,103 170,97 170,109" fill="#2196F3"/>
        <line x1="10" y1="103" x2="50" y2="103" stroke="#2196F3" stroke-width="2"/>
        <line x1="170" y1="103" x2="210" y2="103" stroke="#2196F3" stroke-width="2"/>
      </g>
      <!-- Blocked indicator -->
      <g opacity="${blockOpacity}">
        <line x1="98" y1="93" x2="122" y2="117" stroke="#E53935" stroke-width="3" stroke-linecap="round"/>
        <line x1="122" y1="93" x2="98" y2="117" stroke="#E53935" stroke-width="3" stroke-linecap="round"/>
      </g>
    `;
  }

  function drawCheckValve(isOpen) {
    const flapAngle = isOpen ? -60 : 0;
    const flowOpacity = isOpen ? 1 : 0;
    const blockOpacity = isOpen ? 0 : 1;
    return `
      <!-- Valve body -->
      <rect x="25" y="75" width="170" height="65" rx="6" fill="#888" stroke="#666" stroke-width="2"/>
      <!-- Flow channel -->
      <rect x="25" y="90" width="170" height="35" fill="#d0d8e0"/>
      <!-- Inlet pipe -->
      <rect x="0" y="90" width="30" height="35" fill="#999" stroke="#666" stroke-width="1.5"/>
      <!-- Outlet pipe -->
      <rect x="190" y="90" width="30" height="35" fill="#999" stroke="#666" stroke-width="1.5"/>
      <!-- Seat -->
      <rect x="108" y="88" width="5" height="38" rx="1" fill="#666"/>
      <!-- Hinge point -->
      <circle cx="111" cy="88" r="4" fill="#555"/>
      <!-- Hinged flap -->
      <g transform="rotate(${flapAngle}, 111, 88)" class="valve-part">
        <rect x="108" y="88" width="5" height="38" rx="1" fill="#C0C0C0" stroke="#999" stroke-width="1"/>
      </g>
      <!-- Direction arrow on body -->
      <polygon points="60,77 70,71 70,83" fill="#555"/>
      <polygon points="150,77 160,71 160,83" fill="#555"/>
      <line x1="60" y1="77" x2="160" y2="77" stroke="#555" stroke-width="1.5"/>
      <!-- Flow arrows -->
      <g class="flow-arrow" opacity="${flowOpacity}">
        <polygon points="50,105 65,99 65,111" fill="#2196F3"/>
        <polygon points="155,105 170,99 170,111" fill="#2196F3"/>
        <line x1="10" y1="105" x2="50" y2="105" stroke="#2196F3" stroke-width="2"/>
        <line x1="170" y1="105" x2="210" y2="105" stroke="#2196F3" stroke-width="2"/>
      </g>
      <!-- Blocked indicator -->
      <g opacity="${blockOpacity}">
        <line x1="120" y1="95" x2="140" y2="120" stroke="#E53935" stroke-width="3" stroke-linecap="round"/>
        <line x1="140" y1="95" x2="120" y2="120" stroke="#E53935" stroke-width="3" stroke-linecap="round"/>
      </g>
    `;
  }

  function drawSolenoidValve(isOpen) {
    const plungerY = isOpen ? 60 : 88;
    const flowOpacity = isOpen ? 1 : 0;
    const blockOpacity = isOpen ? 0 : 1;
    return `
      <!-- Valve body -->
      <rect x="30" y="85" width="160" height="55" rx="5" fill="#888" stroke="#666" stroke-width="2"/>
      <!-- Inlet port -->
      <rect x="0" y="100" width="35" height="24" fill="#999" stroke="#666" stroke-width="1.5"/>
      <!-- Outlet port -->
      <rect x="185" y="100" width="35" height="24" fill="#999" stroke="#666" stroke-width="1.5"/>
      <!-- Flow channel -->
      <rect x="30" y="102" width="160" height="20" fill="#d0d8e0"/>
      <!-- Seat / orifice -->
      <rect x="104" y="100" width="12" height="24" rx="2" fill="#666"/>
      <rect x="106" y="104" width="8" height="16" rx="1" fill="#d0d8e0"/>
      <!-- Coil housing -->
      <rect x="85" y="40" width="50" height="48" rx="5" fill="#9C27B0" stroke="#7B1FA2" stroke-width="2"/>
      <!-- Coil windings hint -->
      <line x1="90" y1="50" x2="130" y2="50" stroke="#CE93D8" stroke-width="1.5"/>
      <line x1="90" y1="56" x2="130" y2="56" stroke="#CE93D8" stroke-width="1.5"/>
      <line x1="90" y1="62" x2="130" y2="62" stroke="#CE93D8" stroke-width="1.5"/>
      <line x1="90" y1="68" x2="130" y2="68" stroke="#CE93D8" stroke-width="1.5"/>
      <line x1="90" y1="74" x2="130" y2="74" stroke="#CE93D8" stroke-width="1.5"/>
      <line x1="90" y1="80" x2="130" y2="80" stroke="#CE93D8" stroke-width="1.5"/>
      <!-- Plunger -->
      <rect x="105" y="${plungerY}" width="10" height="30" rx="2" fill="#C0C0C0" stroke="#999" stroke-width="1.5" class="valve-part"/>
      <!-- Electrical leads -->
      <line x1="92" y1="40" x2="92" y2="25" stroke="#333" stroke-width="2"/>
      <line x1="128" y1="40" x2="128" y2="25" stroke="#333" stroke-width="2"/>
      <circle cx="92" cy="23" r="3" fill="#E53935"/>
      <circle cx="128" cy="23" r="3" fill="#333"/>
      <!-- Status indicator -->
      ${isOpen ?
        `<circle cx="110" cy="35" r="4" fill="#4CAF50"/><text x="118" y="38" font-size="9" fill="#4CAF50" font-weight="bold">ON</text>` :
        `<circle cx="110" cy="35" r="4" fill="#888"/><text x="118" y="38" font-size="9" fill="#888" font-weight="bold">OFF</text>`
      }
      <!-- Flow arrows -->
      <g class="flow-arrow" opacity="${flowOpacity}">
        <polygon points="50,110 65,104 65,116" fill="#2196F3"/>
        <polygon points="155,110 170,104 170,116" fill="#2196F3"/>
        <line x1="10" y1="110" x2="50" y2="110" stroke="#2196F3" stroke-width="2"/>
        <line x1="170" y1="110" x2="210" y2="110" stroke="#2196F3" stroke-width="2"/>
      </g>
      <!-- Blocked indicator -->
      <g opacity="${blockOpacity}">
        <line x1="100" y1="103" x2="120" y2="123" stroke="#E53935" stroke-width="3" stroke-linecap="round"/>
        <line x1="120" y1="103" x2="100" y2="123" stroke="#E53935" stroke-width="3" stroke-linecap="round"/>
      </g>
    `;
  }

  function drawReliefValve(isOpen) {
    const poppetY = isOpen ? 72 : 88;
    const flowOpacity = isOpen ? 1 : 0;
    const blockOpacity = isOpen ? 0 : 1;
    return `
      <!-- Valve body -->
      <rect x="50" y="80" width="120" height="70" rx="6" fill="#888" stroke="#666" stroke-width="2"/>
      <!-- Inlet port (bottom) -->
      <rect x="95" y="145" width="30" height="30" fill="#999" stroke="#666" stroke-width="1.5"/>
      <!-- Outlet port (side) -->
      <rect x="165" y="100" width="35" height="24" fill="#999" stroke="#666" stroke-width="1.5"/>
      <!-- Internal chamber -->
      <rect x="65" y="90" width="90" height="48" rx="3" fill="#d0d8e0"/>
      <!-- Seat -->
      <rect x="100" y="88" width="20" height="8" rx="2" fill="#666"/>
      <!-- Poppet -->
      <polygon points="100,${poppetY+12} 120,${poppetY+12} 115,${poppetY} 105,${poppetY}"
        fill="#C0C0C0" stroke="#999" stroke-width="1.5" class="valve-part"/>
      <!-- Stem -->
      <rect x="107" y="35" width="6" height="${poppetY - 35}" fill="#aaa" stroke="#888" stroke-width="1" class="valve-part"/>
      <!-- Spring -->
      <path d="M104,42 L116,48 L104,54 L116,60 L104,66 L116,72" fill="none" stroke="#FF9800" stroke-width="2.5" stroke-linecap="round" class="valve-part"/>
      <!-- Spring housing -->
      <rect x="90" y="25" width="40" height="14" rx="4" fill="#777" stroke="#666" stroke-width="1.5"/>
      <!-- Adjustment screw -->
      <rect x="106" y="15" width="8" height="14" rx="2" fill="#555" stroke="#444" stroke-width="1"/>
      <line x1="106" y1="20" x2="114" y2="20" stroke="#777" stroke-width="1"/>
      <text x="110" y="13" text-anchor="middle" font-size="8" fill="#666">ADJ</text>
      <!-- Pressure arrow from below -->
      <polygon points="110,170 104,160 116,160" fill="#E53935"/>
      <text x="110" y="180" text-anchor="middle" font-size="8" fill="#666">P</text>
      <!-- Flow arrows (relief path to side outlet) -->
      <g class="flow-arrow" opacity="${flowOpacity}">
        <polygon points="140,110 155,104 155,116" fill="#2196F3"/>
        <line x1="125" y1="110" x2="140" y2="110" stroke="#2196F3" stroke-width="2"/>
        <line x1="155" y1="110" x2="195" y2="110" stroke="#2196F3" stroke-width="2"/>
        <polygon points="185,110 195,105 195,115" fill="#2196F3"/>
      </g>
      <!-- Blocked indicator -->
      <g opacity="${blockOpacity}">
        <line x1="100" y1="97" x2="120" y2="117" stroke="#E53935" stroke-width="3" stroke-linecap="round"/>
        <line x1="120" y1="97" x2="100" y2="117" stroke="#E53935" stroke-width="3" stroke-linecap="round"/>
      </g>
    `;
  }

  // Drawing dispatcher
  const drawFunctions = {
    gate: drawGateValve,
    ball: drawBallValve,
    globe: drawGlobeValve,
    butterfly: drawButterflyValve,
    check: drawCheckValve,
    solenoid: drawSolenoidValve,
    relief: drawReliefValve
  };

  // Build the grid
  const grid = document.getElementById('grid');

  valves.forEach(function(valve) {
    const card = document.createElement('div');
    card.className = 'card';
    card.dataset.category = valve.category;
    card.dataset.id = valve.id;

    const svgContent = drawFunctions[valve.id](valve.isOpen);

    card.innerHTML = `
      <div class="tooltip">
        <strong>${valve.name}</strong>
        <span class="tt-func">Function: ${valve.func}</span><br/>
        <span class="tt-app">Application: ${valve.app}</span>
      </div>
      <svg viewBox="0 0 220 200" xmlns="http://www.w3.org/2000/svg">
        ${svgContent}
      </svg>
      <div class="card-name">${valve.name}</div>
      <div class="card-state">${valve.isOpen ? 'OPEN — click to close' : 'CLOSED — click to open'}</div>
    `;

    card.addEventListener('click', function() {
      valve.isOpen = !valve.isOpen;
      const svg = card.querySelector('svg');
      svg.innerHTML = drawFunctions[valve.id](valve.isOpen);
      card.querySelector('.card-state').textContent =
        valve.isOpen ? 'OPEN — click to close' : 'CLOSED — click to open';
    });

    grid.appendChild(card);
  });

})();
</script>
</body>
</html>
